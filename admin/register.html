<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Create Account - DineFlow</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ff7b00",
                        "background-light": "#f8f7f5",
                        "background-dark": "#23190f",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
        .loading-spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #ff7b00;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="font-display">
    <div class="relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col">
            <div class="flex flex-1 justify-center items-center py-10 px-4 sm:px-6 lg:px-8">
                <div class="w-full max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <!-- Left Side: Form -->
                    <div class="flex flex-col justify-center w-full max-w-lg mx-auto">
                        <header class="flex items-center gap-2 mb-8 self-start">
                            <div class="size-6 text-primary">
                                <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M24 45.8096C19.6865 45.8096 15.4698 44.5305 11.8832 42.134C8.29667 39.7376 5.50128 36.3314 3.85056 32.3462C2.19985 28.361 1.76794 23.9758 2.60947 19.7452C3.451 15.5145 5.52816 11.6284 8.57829 8.5783C11.6284 5.52817 15.5145 3.45101 19.7452 2.60948C23.9758 1.76795 28.361 2.19986 32.3462 3.85057C36.3314 5.50129 39.7376 8.29668 42.134 11.8833C44.5305 15.4698 45.8096 19.6865 45.8096 24L24 24L24 45.8096Z" fill="currentColor"></path>
                                </svg>
                            </div>
                            <h2 class="text-slate-900 dark:text-white text-2xl font-bold tracking-tight">DineFlow</h2>
                        </header>
                        <div class="flex flex-col gap-2 mb-8">
                            <h1 class="text-slate-900 dark:text-white text-4xl font-black tracking-tighter">Get Started with DineFlow</h1>
                            <p class="text-slate-500 dark:text-slate-400 text-base font-normal">Streamline your restaurant operations in minutes.</p>
                        </div>
                        <form id="registerForm" class="flex flex-col gap-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <label class="flex flex-col">
                                    <p class="text-slate-800 dark:text-slate-200 text-sm font-medium pb-2">Restaurant Name</p>
                                    <input id="restaurantName" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-slate-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 h-11 placeholder:text-slate-400 dark:placeholder:text-slate-500 px-3 text-sm font-normal" placeholder="e.g., The Gourmet Table" type="text" required/>
                                </label>
                                <label class="flex flex-col">
                                    <p class="text-slate-800 dark:text-slate-200 text-sm font-medium pb-2">Owner Name</p>
                                    <input id="ownerName" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-slate-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 h-11 placeholder:text-slate-400 dark:placeholder:text-slate-500 px-3 text-sm font-normal" placeholder="Enter your full name" type="text" required/>
                                </label>
                            </div>
                            <label class="flex flex-col">
                                <p class="text-slate-800 dark:text-slate-200 text-sm font-medium pb-2">Email Address</p>
                                <input id="email" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-slate-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 h-11 placeholder:text-slate-400 dark:placeholder:text-slate-500 px-3 text-sm font-normal" placeholder="you@example.com" type="email" required/>
                            </label>
                            <label class="flex flex-col">
                                <p class="text-slate-800 dark:text-slate-200 text-sm font-medium pb-2">Password</p>
                                <input id="password" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-slate-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 h-11 placeholder:text-slate-400 dark:placeholder:text-slate-500 px-3 text-sm font-normal" placeholder="Enter your password" type="password" required/>
                                <p class="text-xs text-slate-500 dark:text-slate-400 mt-2">Min. 8 characters, 1 number, 1 special character</p>
                            </label>
                            <label class="flex flex-col">
                                <p class="text-slate-800 dark:text-slate-200 text-sm font-medium pb-2">Confirm Password</p>
                                <input id="confirmPassword" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-slate-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 h-11 placeholder:text-slate-400 dark:placeholder:text-slate-500 px-3 text-sm font-normal" placeholder="Confirm your password" type="password" required/>
                            </label>
                            <button type="submit" class="flex items-center justify-center whitespace-nowrap h-12 px-6 rounded-lg w-full bg-primary text-white text-base font-semibold hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-background-dark transition-colors">
                                Create Account
                            </button>
                        </form>
                        <p class="text-center text-sm text-slate-600 dark:text-slate-400 mt-8">
                            Already have an account? <a class="font-semibold text-primary hover:underline" href="login.html">Log In</a>
                        </p>
                    </div>
                    <!-- Right Side: Testimonial/Image -->
                    <div class="hidden lg:flex flex-col items-center justify-center bg-white dark:bg-slate-900/50 p-10 rounded-xl border border-slate-200 dark:border-slate-800 h-full">
                        <img class="w-full h-64 object-cover rounded-lg mb-8" data-alt="A modern restaurant interior with warm lighting and neatly set tables" src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80">
                        <div class="text-center">
                            <span class="material-symbols-outlined text-4xl text-primary mb-4">format_quote</span>
                            <blockquote class="text-xl italic text-slate-700 dark:text-slate-300 mb-6">
                                "DineFlow has completely transformed our operations. We're more efficient, our staff is happier, and our customers have never been more satisfied."
                            </blockquote>
                            <div class="flex items-center justify-center">
                                <img class="w-12 h-12 rounded-full object-cover mr-4" data-alt="Portrait of a smiling restaurant owner" src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80">
                                <div>
                                    <p class="font-semibold text-slate-900 dark:text-white">Isabelle Rossi</p>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">Owner, The Crimson Spoon</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { AuthService } from '../js/auth.js';

        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const restaurantName = document.getElementById('restaurantName').value;
            const ownerName = document.getElementById('ownerName').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            // Basic validation
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }

            if (password.length < 8) {
                alert('Password must be at least 8 characters long');
                return;
            }

            const button = e.target.querySelector('button[type="submit"]');
            const originalText = button.innerHTML;
            button.disabled = true;
            button.innerHTML = '<div class="loading-spinner"></div>Creating Account...';

            try {
                const result = await AuthService.register({
                    restaurantName,
                    ownerName,
                    email,
                    password
                });
                
                if (result.success) {
                    alert('Registration successful! Please check your email for verification.');
                    window.location.href = 'dashboard.html';
                } else {
                    alert('Registration failed: ' + result.error);
                    button.disabled = false;
                    button.innerHTML = originalText;
                }
            } catch (error) {
                alert('Registration failed: ' + error.message);
                button.disabled = false;
                button.innerHTML = originalText;
            }
        });

        // Check if user is already logged in
        window.addEventListener('DOMContentLoaded', async () => {
            const user = await AuthService.getCurrentUser();
            if (user) {
                window.location.href = 'dashboard.html';
            }
        });
    </script>
</body>
</html>